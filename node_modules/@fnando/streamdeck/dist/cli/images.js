"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
exports.images = void 0;
const fs_1 = __importDefault(require("fs"));
const path_1 = __importDefault(require("path"));
const glob_1 = require("glob");
const sourceDir = path_1.default.join(process.cwd(), "src");
const getContentType = (filePath) => {
    if (filePath.endsWith("png")) {
        return "image/png";
    }
    if (filePath.endsWith("gif")) {
        return "image/gif";
    }
    return "image/jpeg";
};
function images() {
    const images = {};
    (0, glob_1.sync)(`${sourceDir}/images/embed/**/*.{png,jpg,gif}`).forEach((imagePath) => {
        if (!imagePath.includes("@2x")) {
            return;
        }
        const contents = fs_1.default.readFileSync(imagePath).toString("binary");
        const base64 = btoa(contents);
        const contentType = getContentType(imagePath);
        const dataURL = `data:${contentType};base64,${base64}`;
        const name = path_1.default
            .basename(imagePath, path_1.default.extname(imagePath))
            .replace("@2x", "");
        images[name] = dataURL;
    });
    fs_1.default.writeFileSync(path_1.default.join(sourceDir, "images.json"), JSON.stringify(images, null, 2));
}
exports.images = images;
//# sourceMappingURL=images.js.map